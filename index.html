<html lang="en">

<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Chat App</title>
</head>

<body>
 <form id="form" action="submit">
  <input id="input" type="text" autocomplete="off"><button>send</button>
 </form>

 <ul id="messages"></ul>
 <script src="/socket.io/socket.io.js"></script>
 <script>

  const socket = io()

  const form = document.getElementById('form')
  const input = document.getElementById('input');

  form.addEventListener('submit', (e) => {
   e.preventDefault()

   if (input.value) {
    socket.emit("chat message", input.value)
    console.log(input.value);

    input.value = '';
   }
  })

  socket.on('chat message', (msg) => {
   console.log(msg);
   const timestamp = new Date().toLocaleTimeString(); // Get the current time
   const li = document.createElement('li');
   li.textContent = `${timestamp} - ${msg}`; // Add timestamp to message
   document.getElementById('messages').appendChild(li);
  })
 </script>
</body>

</html>